---
title: '모달창 바깥 클릭시 닫힘 미작동 수정'
excerpt: '20210427 작업일지'
toc: true
toc_sticky: true
toc_label: 'On this page'

categories:
  - workLog
tags:
  - 오류
last_modified_at: 2020-04-27T08:06:00-05:00
---

#### 상황 :

사이드 화면을 제외한 영역을 누르면 해당 사이드 화면(모달창)이 닫히도록 만들고 싶었는데 닫히지 않는 오류가 발생.

<br>

#### 해결 :

1. 기존에는 map을 돌리는 img에 ref를 넣었는데 이번에는 img들을 전체 감싸는 wrapper에다가 ref를 주었다.
2. ShowClicked && !ref 일 때 setShowClicked(false) 가 되게 하였는데, 그냥 ShowClicked를 삭제했다.

<br>

```js
(...)
  const handleCloseModal = (e) => {
    if (!modalEl.current || !modalEl.current.contains(e.target))
      setShowClicked(false);
  };

<div className={'showHideWrapper' + (ShowClicked ? ' show' : '')} ref={modalEl} >
        {popular.popular &&
          popular.popular.map((post, index) => {
            return (
              <>
                <div className="postItem">
                  <CrownFilled className="crown-icon" />
                  <img
                    src={post.displayUrl}
                    key={post.key}
                    className="instagramImg"
                    onClick={() => {
                      setShowClicked(true);
                      setPost(post);
                    }}
                  />
</div>
(...)
```
